(function(n,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(n=typeof globalThis!="undefined"?globalThis:n||self,e(n["@thoughts-ui/virtual-scroll"]={},n.Vue))})(this,function(n,e){"use strict";const b=(o,l)=>{if(o.install=r=>{for(const t of[o,...Object.values(l!=null?l:{})])r.component(t.name,t)},l)for(const[r,t]of Object.entries(l))o[r]=t;return o};var y=e.defineComponent({props:{itemHeight:{type:Number,default:0,required:!0},label:{type:String,default:"",required:!0}},setup(o,{emit:l}){const{label:r,itemHeight:t}=o,s={height:`${t}px`};return()=>e.createVNode("li",{style:s},[r])}});function V(o,l,r,t){const s=e.ref([]),c=e.ref([]),f=e.ref([]),v=e.ref([]);let d=!1;const p=a=>{if(d)return;d=!0,requestAnimationFrame(()=>{d=!1});const h=a.target.scrollTop;u(h)},u=a=>{const h=g=>Math.ceil(g/l.value),T=a-t.value*l.value>0?a-t.value*l.value:0;H();const i=h(a);s.value=S(i,i+t.value),c.value=S(i+t.value,i+t.value*2),f.value=S(i+t.value*2,i+t.value*3),v.value=[...s.value,...c.value,...f.value];function S(g,M){return r.value.slice(g,M)}function H(){o.value.style.transform=`translate3d(0, ${T}px, 0)`}};return{preList:s,midList:c,nextList:f,renderList:v,handleScroll:p,renderScroll:u}}var j="",L=e.defineComponent({name:"VirtualScroll",components:{VirtualScrollOption:y},props:{options:{type:Array,default:()=>[]},itemHeight:{type:Number,default:32}},setup(o){const l=e.ref(null),r=e.ref(null),{options:t,itemHeight:s}=e.toRefs(o),c=e.ref(0),f={height:`${t.value.length*s.value}px`},{handleScroll:v,renderList:d,renderScroll:p}=V(r,s,t,c);return e.onMounted(()=>{var a;const u=(a=l.value)==null?void 0:a.clientHeight;c.value=Math.ceil(u/s.value),p(0)}),()=>e.createVNode("div",{class:"virtual-scroll",ref:l,onScroll:v},[e.createVNode("div",{class:"virtual-scroll-bg",style:f},null),e.createVNode("ul",{class:"virtual-scroll-list",ref:r},[d.value.map(u=>e.createVNode(y,{label:u.value,itemHeight:32,key:u.value},null))])])}});const m=b(L);n.ThVirtualScroll=m,n.default=m,Object.defineProperty(n,"__esModule",{value:!0}),n[Symbol.toStringTag]="Module"});
